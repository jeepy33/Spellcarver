[gd_scene load_steps=20 format=3 uid="uid://dlrmoyjnyoklc"]

[ext_resource type="Script" path="res://src/scripts/shop.gd" id="1_hwtng"]
[ext_resource type="PackedScene" uid="uid://cj1x2tjlhwp4x" path="res://src/scenes/player.tscn" id="1_lu3kv"]
[ext_resource type="Script" path="res://src/scripts/rune_table.gd" id="2_g1li3"]
[ext_resource type="Texture2D" uid="uid://di1env1xef8hl" path="res://assets/placeholders/rune_table.png" id="2_l0513"]
[ext_resource type="Texture2D" uid="uid://c5afnqufanpfl" path="res://assets/placeholders/rune_table_hightlight.png" id="5_gmpsj"]
[ext_resource type="Texture2D" uid="uid://cmqmvd57pcjou" path="res://assets/placeholders/register.png" id="6_m2y38"]
[ext_resource type="Texture2D" uid="uid://83na5ja4i83r" path="res://assets/placeholders/save_station.png" id="7_2tngb"]
[ext_resource type="Texture2D" uid="uid://c8mk18cxx5xi2" path="res://assets/placeholders/door.png" id="8_8g8vq"]
[ext_resource type="Script" path="res://src/scripts/NPCPathFollow.gd" id="9_fptua"]
[ext_resource type="PackedScene" uid="uid://c5iusm86jg3xn" path="res://src/scenes/npc.tscn" id="9_vfvce"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_0eeak"]
radius = 73.5
height = 216.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xpq5x"]
size = Vector2(305, 226)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_c13xr"]
size = Vector2(114, 94)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xefip"]
size = Vector2(211, 162.25)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_y6rgg"]
size = Vector2(185.333, 182.667)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_s0jdf"]
size = Vector2(341.333, 237.333)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1u5xs"]
size = Vector2(95, 34)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2y5qp"]
size = Vector2(262, 87)

[sub_resource type="Curve2D" id="Curve2D_kumup"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 993, 646, 0, 0, 0, 0, 994, 369)
}
point_count = 2

[node name="Node2D" type="Node2D"]
script = ExtResource("1_hwtng")

[node name="player" parent="." instance=ExtResource("1_lu3kv")]
position = Vector2(583, 330)
speed = 300

[node name="rune_table" type="StaticBody2D" parent="."]
position = Vector2(1015, 168)
script = ExtResource("2_g1li3")
metadata/_edit_group_ = true

[node name="table" type="Sprite2D" parent="rune_table"]
z_index = -1
texture = ExtResource("2_l0513")

[node name="CollisionShape2D" type="CollisionShape2D" parent="rune_table"]
position = Vector2(0, 0.5)
rotation = 1.5708
shape = SubResource("CapsuleShape2D_0eeak")

[node name="highlight" type="Sprite2D" parent="rune_table"]
position = Vector2(0, -75)
scale = Vector2(0.8, 0.8)
texture = ExtResource("5_gmpsj")

[node name="Area2D" type="Area2D" parent="rune_table"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="rune_table/Area2D"]
position = Vector2(5.5, 0)
shape = SubResource("RectangleShape2D_xpq5x")
debug_color = Color(0.647059, 0.454902, 0.67451, 0.419608)

[node name="player_start" type="Marker2D" parent="."]
position = Vector2(585, 359)

[node name="cash_register" type="StaticBody2D" parent="."]
position = Vector2(121, 475)
metadata/_edit_group_ = true

[node name="register" type="Sprite2D" parent="cash_register"]
texture = ExtResource("6_m2y38")

[node name="CollisionShape2D" type="CollisionShape2D" parent="cash_register"]
position = Vector2(-1, 1)
shape = SubResource("RectangleShape2D_c13xr")

[node name="highlight" type="Sprite2D" parent="cash_register"]
position = Vector2(0, -47.9)
scale = Vector2(0.465574, 0.567382)
texture = ExtResource("5_gmpsj")

[node name="Area2D" type="Area2D" parent="cash_register"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="cash_register/Area2D"]
position = Vector2(0, 5.125)
shape = SubResource("RectangleShape2D_xefip")
debug_color = Color(0.592157, 0.443137, 0.827451, 0.419608)

[node name="save_station" type="StaticBody2D" parent="."]
position = Vector2(107, 117)
scale = Vector2(0.75, 0.75)
metadata/_edit_group_ = true

[node name="save_sprite" type="Sprite2D" parent="save_station"]
texture = ExtResource("7_2tngb")

[node name="CollisionShape2D" type="CollisionShape2D" parent="save_station"]
position = Vector2(3.33333, 2)
shape = SubResource("RectangleShape2D_y6rgg")

[node name="highlight" type="Sprite2D" parent="save_station"]
position = Vector2(6.66665, -100)
scale = Vector2(0.706739, 0.524464)
texture = ExtResource("5_gmpsj")

[node name="Area2D" type="Area2D" parent="save_station"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="save_station/Area2D"]
position = Vector2(48, -10.6667)
shape = SubResource("RectangleShape2D_s0jdf")
debug_color = Color(0.643137, 0.411765, 0.823529, 0.419608)

[node name="ConfirmationDialog" type="ConfirmationDialog" parent="save_station"]
title = "Save Game?"
position = Vector2i(500, 360)
size = Vector2i(283, 100)
unresizable = true
borderless = true
ok_button_text = "Save"
dialog_text = "Would you like to save your game?"

[node name="shop_door" type="StaticBody2D" parent="."]
position = Vector2(986, 700)
metadata/_edit_group_ = true

[node name="door" type="Sprite2D" parent="shop_door"]
texture = ExtResource("8_8g8vq")

[node name="CollisionShape2D" type="CollisionShape2D" parent="shop_door"]
position = Vector2(-1.5, -2)
shape = SubResource("RectangleShape2D_1u5xs")

[node name="highlight" type="Sprite2D" parent="shop_door"]
position = Vector2(0.499988, -28.4)
scale = Vector2(0.516393, 0.4)
texture = ExtResource("5_gmpsj")

[node name="Area2D" type="Area2D" parent="shop_door"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="shop_door/Area2D"]
position = Vector2(6, -28.5)
shape = SubResource("RectangleShape2D_2y5qp")
debug_color = Color(0.592157, 0.454902, 0.792157, 0.419608)

[node name="NPCTimer" type="Timer" parent="."]
wait_time = 3.0

[node name="NPCPath" type="Path2D" parent="."]
curve = SubResource("Curve2D_kumup")

[node name="NPCPathFollow" type="PathFollow2D" parent="NPCPath"]
position = Vector2(993, 646)
rotation = -1.56719
loop = false
script = ExtResource("9_fptua")
runSpeed = 75

[node name="npc" parent="NPCPath/NPCPathFollow" instance=ExtResource("9_vfvce")]

[connection signal="touching" from="player" to="." method="_on_player_touching"]
[connection signal="body_entered" from="rune_table/Area2D" to="." method="_on_area_2d_body_entered"]
[connection signal="body_exited" from="rune_table/Area2D" to="." method="_on_area_2d_body_exited"]
[connection signal="body_entered" from="cash_register/Area2D" to="." method="_on_register_body_entered"]
[connection signal="body_exited" from="cash_register/Area2D" to="." method="_on_register_body_exited"]
[connection signal="body_entered" from="save_station/Area2D" to="." method="_on_save_body_entered"]
[connection signal="body_exited" from="save_station/Area2D" to="." method="_on_save_body_exited"]
[connection signal="body_entered" from="shop_door/Area2D" to="." method="_on_door_body_entered"]
[connection signal="body_exited" from="shop_door/Area2D" to="." method="_on_door_body_exited"]
[connection signal="timeout" from="NPCTimer" to="." method="_on_npc_timer_timeout"]
[connection signal="timeout" from="NPCTimer" to="NPCPath/NPCPathFollow" method="_on_npc_timer_timeout"]
[connection signal="pathComplete" from="NPCPath/NPCPathFollow" to="NPCPath/NPCPathFollow/npc" method="_on_npc_path_follow_path_complete"]
[connection signal="playerEnter" from="NPCPath/NPCPathFollow/npc" to="." method="_on_npc_player_enter"]
[connection signal="playerLeave" from="NPCPath/NPCPathFollow/npc" to="." method="_on_npc_player_leave"]
